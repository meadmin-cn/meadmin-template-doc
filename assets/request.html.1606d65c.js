import{_ as e,r as o,o as c,c as l,a as n,b as t,e as s,d as p}from"./app.43081e59.js";const i={},u=n("h1",{id:"\u63A5\u53E3\u8BF7\u6C42",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u63A5\u53E3\u8BF7\u6C42","aria-hidden":"true"},"#"),s(" \u63A5\u53E3\u8BF7\u6C42")],-1),r=s("\u63A5\u53E3\u8BF7\u6C42\u51FD\u6570"),k=n("code",null,"request",-1),d=s("\u4F4D\u4E8E\u6587\u4EF6"),v=n("code",null,"@/utils/request.ts",-1),m=s("\u4E2D\uFF0C\u57FA\u4E8E"),b={href:"https://www.axios-http.cn/",target:"_blank",rel:"noopener noreferrer"},g=s("axios"),h=s("\u548C"),_={href:"https://next.cn.attojs.org/guide/introduction.html",target:"_blank",rel:"noopener noreferrer"},y=s("vue-request v2.x"),f=s("\u4E8C\u6B21\u5C01\u88C5,\u4F7F\u7528\u524D\u8BF7\u5148\u9605\u8BFB"),w={href:"https://www.axios-http.cn/",target:"_blank",rel:"noopener noreferrer"},q=s("axios"),x=s("\u548C"),A={href:"https://next.cn.attojs.org/guide/introduction.html",target:"_blank",rel:"noopener noreferrer"},R=s("vue-request v2.x"),L=s("\u6587\u6863"),E=p(`<p>\u6838\u5FC3\u4EE3\u7801\u5982\u4E0B\uFF1A</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token doc-comment comment">/**
 * \u8BF7\u6C42\u51FD\u6570
 * <span class="token keyword">@param</span> <span class="token parameter">axiosConfig</span>  axios\u7684\u914D\u7F6E\u9879
 * <span class="token keyword">@param</span> <span class="token parameter">options</span> vue request\u914D\u7F6E\u9879+\u81EA\u5B9A\u4E49\u914D\u7F6E\u9879\u53C2\u8003 RequestOptions
 * <span class="token keyword">@param</span> <span class="token parameter">returnAxios</span>
 * <span class="token keyword">@returns</span>
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">P</span> <span class="token keyword">extends</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token builtin">boolean</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  <span class="token function-variable function">axiosConfig</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token constant">P</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> AxiosRequestConfig <span class="token operator">|</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>AxiosRequestConfig<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  options<span class="token operator">?</span><span class="token operator">:</span> RequestOptions<span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">P</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  returnAxios<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> axiosService <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token constant">P</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">R</span><span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">//loading\u653E\u5230\u5FAE\u4EFB\u52A1\u4E2D\u53BB\u6267\u884C\u4EE5\u786E\u4FDD\u5728\u81EA\u52A8\u8C03\u7528\u8BF7\u6C42\u65F6\u7B49\u5F85\u6240\u6709\u7684\u5B8F\u4EFB\u52A1\u4E2D\u7684\u751F\u547D\u5468\u671F\u51FD\u6570\u6267\u884C\u5B8C\u518D\u521B\u5EFAloading\u5B9E\u4F8B \u4EE5\u89C4\u907FcurrentInstance\u7684\u76F8\u5173\u8B66\u544A</span>
      <span class="token operator">!</span>options<span class="token operator">?.</span>noLoading <span class="token operator">&amp;&amp;</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>loading<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> res <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">axiosConfig</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res <span class="token operator">||</span> res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;\u8FD4\u56DE\u503C\u89E3\u6790\u5931\u8D25&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 401\uFF1A\u8BA4\u8BC1\u5931\u8D25</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">&#39;401&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token string">&#39;200&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token operator">?.</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ElMessage<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> res<span class="token punctuation">.</span>msg <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token operator">!</span>options<span class="token operator">?.</span>noLoading <span class="token operator">&amp;&amp;</span> <span class="token function">closeLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> options<span class="token operator">?.</span>needAll <span class="token operator">?</span> res <span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token operator">!</span>options<span class="token operator">?.</span>noLoading <span class="token operator">&amp;&amp;</span> <span class="token function">closeLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token operator">!</span>options<span class="token operator">?.</span>noError <span class="token operator">&amp;&amp;</span>
        ElMessage<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          message<span class="token operator">:</span> e <span class="token keyword">instanceof</span> <span class="token class-name">Error</span> <span class="token operator">?</span> e<span class="token punctuation">.</span>message <span class="token operator">:</span> <span class="token function">String</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> returnAxios <span class="token operator">?</span> axiosService <span class="token operator">:</span> <span class="token generic-function"><span class="token function">useRequest</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">P</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>axiosService<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u81EA\u5B9A\u4E49\u8FD4\u56DE\u503C\u683C\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u81EA\u5B9A\u4E49\u8FD4\u56DE\u503C\u683C\u5F0F" aria-hidden="true">#</a> \u81EA\u5B9A\u4E49\u8FD4\u56DE\u503C\u683C\u5F0F</h2><p><code>request</code>\u51FD\u6570\u4E3B\u8981\u662F\u5C01\u88C5<code>vue-request</code>\u4F7F\u5176\u53D1\u8D77\u8BF7\u6C42\u4F7F\u7528<code>axios</code>\uFF0C\u5E76\u4E14\u8BF7\u6C42\u65F6\u52A0\u4E0A\u4E86loading\u3001\u5BF9\u63A5\u53E3\u8FD4\u56DE\u503C\u8FDB\u884C\u4E86\u6821\u9A8C\u5904\u7406\u3001\u51FA\u9519\u65F6\u81EA\u52A8\u62A5\u9519\u63D0\u793A</p><p>\u63A5\u53E3\u5904\u7406\u683C\u5F0F\u4EC5\u4E3A\u793A\u4F8B\u683C\u5F0F\uFF0C\u5B9E\u9645\u4F7F\u7528\u9700\u8981\u6839\u636E\u81EA\u5DF1\u7684\u9879\u76EE\u89C4\u8303\u4FEE\u6539\u4EE5\u4E0B\u4EE3\u7801</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res <span class="token operator">||</span> res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&#39;\u8FD4\u56DE\u503C\u89E3\u6790\u5931\u8D25&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 401\uFF1A\u8BA4\u8BC1\u5931\u8D25</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">&#39;401&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">useUserStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>code <span class="token operator">!==</span> <span class="token string">&#39;200&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">!</span>options<span class="token operator">?.</span>noLoading <span class="token operator">&amp;&amp;</span> <span class="token function">closeLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> options<span class="token operator">?.</span>needAll <span class="token operator">?</span> res <span class="token operator">:</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5165\u53C2\u8BF4\u660E" tabindex="-1"><a class="header-anchor" href="#\u5165\u53C2\u8BF4\u660E" aria-hidden="true">#</a> \u5165\u53C2\u8BF4\u660E</h2>`,7),P=n("thead",null,[n("tr",null,[n("th",null,"\u53C2\u6570"),n("th",null,"\u7C7B\u578B"),n("th",null,"\u8BF4\u660E"),n("th",null,"\u662F\u5426\u5FC5\u586B")])],-1),S=n("td",null,"axiosConfig",-1),T=n("td",null,"AxiosRequestConfig",-1),O=s("\u63A5\u53E3\u8BF7\u6C42\u6570\u636E\uFF0C\u5B8C\u5168\u9075\u5FAA "),j={href:"https://www.axios-http.cn/docs/req_config",target:"_blank",rel:"noopener noreferrer"},C=s("axios config"),I=s(" \u7684\u89C4\u5219"),N=n("td",null,"\u662F",-1),M=n("td",null,"options",-1),z=n("td",null,"RequestOptions",-1),U=s("\u57FA\u4E8E"),V={href:"https://next.cn.attojs.org/api/#options",target:"_blank",rel:"noopener noreferrer"},B=s("vue-request options"),J=s("\u914D\u7F6E\u6269\u5C55\u4E86\u4E2A\u522B\u914D\u7F6E\uFF0C\u4E0B\u9762\u4F1A\u8BE6\u7EC6\u8BF4\u540D"),D=n("td",null,"\u5426",-1),F=n("tr",null,[n("td",null,"returnAxios"),n("td",null,"boolean"),n("td",null,"\u8FD4\u56DEaxios\uFF0C\u5F53\u4F20\u5165true\u662F\u8FD4\u56DEaxios\u4E0D\u4F20\u6216false\u65F6\u8FD4\u56DEvue-reques\u5BF9\u8C61"),n("td",null,"\u5426")],-1),G=n("thead",null,[n("tr",null,[n("th",null,"RequestOptions"),n("th",null,"\u7C7B\u578B"),n("th",null,"\u8BF4\u660E"),n("th",null,"\u662F\u5426\u5FC5\u586B")])],-1),H=n("tr",null,[n("td",null,"needAll"),n("td",null,"boolean"),n("td",null,"\u8FD4\u56DE\u5B8C\u6574\u7684\u8FD4\u56DE\u503C\u5FFD\u7565\u683C\u5F0F\u5316\u8FD4\u56DE\u503C\uFF08\u9ED8\u8BA4\u8FD4\u56DE\u7684\u662Fdata\u5B57\u6BB5\uFF09"),n("td",null,"\u5426")],-1),K=n("tr",null,[n("td",null,"noLoading"),n("td",null,"boolean"),n("td",null,"\u4E0D\u9700\u8981lodaing"),n("td",null,"\u5426")],-1),Q=n("tr",null,[n("td",null,"noError"),n("td",null,"boolean"),n("td",null,"\u4E0D\u9700\u8981\u62A5\u9519"),n("td",null,"\u5426")],-1),W=n("td",null,"... vue-request options",-1),X={href:"https://next.cn.attojs.org/api/#options",target:"_blank",rel:"noopener noreferrer"},Y=s("vue-request options"),Z=s("\u66F4\u591A\u5B57\u6BB5\u53C2\u8003"),$={href:"https://next.cn.attojs.org/api/#options",target:"_blank",rel:"noopener noreferrer"},nn=s("vue-request options"),sn=s(" \u6587\u6863"),an=n("td",null,"\u5426",-1),tn=p(`<h2 id="\u4F7F\u7528\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u793A\u4F8B" aria-hidden="true">#</a> \u4F7F\u7528\u793A\u4F8B</h2><ul><li><p>\u5728\u63A5\u53E3\u6587\u4EF6\u5939<code>@/api</code>\u6587\u4EF6\u5939\u4E2D\u65B0\u5EFA\u63A5\u53E3\u6587\u4EF6<code>@/api/example.ts</code></p></li><li><p>\u5728<code>@/api/example.ts</code>\u52A0\u5165\u63A5\u53E3\u58F0\u660E\u4EE3\u7801</p></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&#39;@/utils/request&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token keyword">enum</span> Api <span class="token punctuation">{</span>
  <span class="token constant">LIST</span> <span class="token operator">=</span> <span class="token string">&#39;/api/list&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ListParams</span> <span class="token punctuation">{</span>
  page<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  size<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ListResult</span> <span class="token punctuation">{</span>
  total<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  list<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//\u5BFC\u51FA\u5217\u8868\u63A5\u53E3</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">listApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span>ListResult<span class="token punctuation">,</span> <span class="token punctuation">[</span>ListParams<span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> Api<span class="token punctuation">.</span><span class="token constant">LIST</span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span>
    params<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5728<code>vue</code>\u6587\u4EF6\u4E2D\u4F7F\u7528</li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in data<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ item }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>request<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> listApi <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api/example&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> runAsync<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> error<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">listApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">runAsync</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">page</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">size</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u8BF7\u6C42\u63A5\u53E3 \u5EFA\u8BAE\u4F7F\u7528runAsync\u8BF7\u6C42\u800C\u4E0D\u662Frun,\u533A\u522B\u8BF7\u53C2\u8003\u6587\u6863https://next.cn.attojs.org/api/#runasync</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u81EA\u52A8\u8BF7\u6C42\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u81EA\u52A8\u8BF7\u6C42\u793A\u4F8B" aria-hidden="true">#</a> \u81EA\u52A8\u8BF7\u6C42\u793A\u4F8B</h2><ul><li><p>\u5728\u63A5\u53E3\u6587\u4EF6\u5939<code>@/api</code>\u6587\u4EF6\u5939\u4E2D\u65B0\u5EFA\u63A5\u53E3\u6587\u4EF6<code>@/api/example.ts</code></p></li><li><p>\u5728<code>@/api/example.ts</code>\u52A0\u5165\u63A5\u53E3\u58F0\u660E\u4EE3\u7801</p></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">&#39;@/utils/request&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token keyword">enum</span> Api <span class="token punctuation">{</span>
  <span class="token constant">LIST</span> <span class="token operator">=</span> <span class="token string">&#39;/api/list&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ListParams</span> <span class="token punctuation">{</span>
  page<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  size<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">ListResult</span> <span class="token punctuation">{</span>
  total<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  list<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//\u5BFC\u51FA\u5217\u8868\u63A5\u53E3</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">listApi</span><span class="token punctuation">(</span>options<span class="token operator">:</span> RequestOptions<span class="token operator">&lt;</span>ListResult<span class="token punctuation">,</span> <span class="token punctuation">[</span>ListParams<span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token operator">:</span> Api<span class="token punctuation">.</span><span class="token constant">LIST</span><span class="token punctuation">,</span>
      method<span class="token operator">:</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span>
      params<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    options<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5728<code>vue</code>\u6587\u4EF6\u4E2D\u4F7F\u7528</li></ul><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item, index) in data<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        {{ item }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>request<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> listApi <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/api/example&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> runAsync<span class="token punctuation">,</span> loading<span class="token punctuation">,</span> error<span class="token punctuation">,</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">listApi</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">defaultParams</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">size</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">manual</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//manual\u4EE3\u8868\u7EC4\u4EF6\u52A0\u8F7D\u540E\u81EA\u52A8\u8BF7\u6C42\u63A5\u53E3</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="setup\u5916\u8BF7\u6C42\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#setup\u5916\u8BF7\u6C42\u793A\u4F8B" aria-hidden="true">#</a> <code>setup</code>\u5916\u8BF7\u6C42\u793A\u4F8B</h2>`,11),pn=n("code",null,"vue-request",-1),en=s(" \u662F\u4E13\u95E8\u4E3A"),on=n("code",null,"setup",-1),cn=s("\u4F7F\u7528\u7684\u4E00\u4E2A\u7C7B\u5E93\uFF0C\u8BE6\u60C5\u8BF7\u53C2\u8003"),ln={href:"https://github.com/AttoJS/vue-request/issues/149",target:"_blank",rel:"noopener noreferrer"},un=s("issues:149"),rn=s("\u3002 \u5728"),kn=n("code",null,"setup",-1),dn=s("\u5916\u4F7F\u7528\u65F6\u5E94\u8BE5\u76F4\u63A5\u4F7F\u7528"),vn=n("code",null,"axios",-1),mn=s(","),bn=n("code",null,"request",-1),gn=s("\u51FD\u6570\u5141\u8BB8\u63A5\u6536\u4E00\u4E2A\u53C2\u6570\u76F4\u63A5\u8FD4\u56DE"),hn=n("code",null,"axios",-1),_n=s("\u5B9E\u4F8B"),yn=p(`<ul><li>\u5728<code>@/api/routeMenu.ts</code>\u52A0\u5165\u63A5\u53E3\u58F0\u660E\u4EE3\u7801</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> request<span class="token punctuation">,</span> RequestOptions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/request&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> RouteRecordRaw <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token keyword">enum</span> Api <span class="token punctuation">{</span>
  <span class="token constant">MENU</span> <span class="token operator">=</span> <span class="token string">&#39;/api/menu/list&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">menuApi</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">boolean</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  options<span class="token operator">:</span> RequestOptions<span class="token operator">&lt;</span>RouteRecordRaw<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  returnAxios<span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token keyword">as</span> <span class="token constant">T</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token operator">:</span> Api<span class="token punctuation">.</span><span class="token constant">MENU</span><span class="token punctuation">,</span>
      method<span class="token operator">:</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    options<span class="token punctuation">,</span>
    returnAxios<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5728setup\u5916\u4F7F\u7528</li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">menuApi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,4);function fn(wn,qn){const a=o("ExternalLinkIcon");return c(),l("div",null,[u,n("p",null,[r,k,d,v,m,n("a",b,[g,t(a)]),h,n("a",_,[y,t(a)]),f,n("a",w,[q,t(a)]),x,n("a",A,[R,t(a)]),L]),E,n("table",null,[P,n("tbody",null,[n("tr",null,[S,T,n("td",null,[O,n("a",j,[C,t(a)]),I]),N]),n("tr",null,[M,z,n("td",null,[U,n("a",V,[B,t(a)]),J]),D]),F])]),n("table",null,[G,n("tbody",null,[H,K,Q,n("tr",null,[W,n("td",null,[n("a",X,[Y,t(a)])]),n("td",null,[Z,n("a",$,[nn,t(a)]),sn]),an])])]),tn,n("p",null,[pn,en,on,cn,n("a",ln,[un,t(a)]),rn,kn,dn,vn,mn,bn,gn,hn,_n]),yn])}const An=e(i,[["render",fn],["__file","request.html.vue"]]);export{An as default};
